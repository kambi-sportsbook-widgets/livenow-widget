<!doctype html>
<html ng-app="livenowWidget">
<head>
   <title>Live Now Widget</title>
   <meta charset="UTF-8">
   <meta name="apple-mobile-web-app-title" content="Kambi">
   <meta name="description" content="Live Now Widget">
   <meta name="HandheldFriendly" content="True">
   <meta name="MobileOptimized" content="320">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

   <meta name="fragment" content="!"/>

   <meta name="mobile-web-app-capable" content="yes">
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="apple-mobile-web-app-status-bar-style" content="black">
   <meta name="apple-mobile-web-app-title" content="">

   <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Roboto:300,400,500"/>
   <link rel="stylesheet" type="text/css" href="//kambi-cdn.globalmouth.com/lib/dist/css/app-base-all.css"/>
   <link rel="stylesheet" type="text/css" href="//kambi-cdn.globalmouth.com/lib/dist/css/widgets.css"/>
   <link rel="stylesheet" type="text/css" href="//kambi-cdn.globalmouth.com/lib/dist/css/app-icons.css"/>

   <!-- build:css -->
   <!-- This section will be replaced in the gulp build process -->
   <link rel="stylesheet" type="text/css" href="css/app.css"/>
   <!-- endbuild -->

   <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
   <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular-animate.min.js"></script>
   <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular-sanitize.min.js"></script>

   <!-- build:js -->
   <!-- This section will be replaced in the gulp build process -->
   <script src="js/app.js"></script>
   <script src="js/controllers/appController.js"></script>
   <script src="js/service/timerService.js"></script>
   <script src="js/directives/timerDirective.js"></script>
   <!-- endbuild -->

   <!-- build:corelib -->
   <!-- This section will be replaced in the gulp build process -->
   <script src="../node_modules/kambi-sportsbook-widget-library/src/js/controllers/widgetCoreController.js"></script>
   <script src="../node_modules/kambi-sportsbook-widget-library/src/js/filters/startFrom.js"></script>
   <script src="../node_modules/kambi-sportsbook-widget-library/src/js/services/kambiWidgetService.js"></script>
   <script src="../node_modules/kambi-sportsbook-widget-library/src/js/services/kambiAPIService.js"></script>
   <script src="../node_modules/kambi-sportsbook-widget-library/src/js/services/coreUtilsService.js"></script>
   <script src="../node_modules/kambi-sportsbook-widget-library/src/js/directives/kambiPaginationDirective.js"></script>
   <!-- endbuild -->

   <!-- build:translate -->
   <!-- This section will be replaced in the gulp build process -->
   <script src="../node_modules/kambi-sportsbook-widget-core-translate/dist/translate.js"></script>
   <!-- endbuild -->

   <!-- build:kambi-widget-api -->
   <!-- This section will be replaced in the gulp build process -->
   <script src="https://c3-static.kambi.com/sb-mobileclient/widget-api/1.0.0.8/kambi-widget-api.js"></script>
   <!-- endbuild -->
</head>
<body class="kw-body">
<div class="KambiWidget-card-background-color KambiWidget-card-text-color l-flexbox l-vertical l-expander"
     ng-controller="appController">
   <!--Header-->
   <header class="kw-header KambiWidget-header l-pl-16">{{'TITLE' | translate }} ({{liveEvents.length}})</header>

   <!--Main-->
   <main class="l-flexbox l-vertical l-flexed l-pack-start">
      <div class="kw-event KambiWidget-card-background-color--hoverable l-flexbox l-vertical l-pb-12 l-pt-12"
           ng-class="{'anim-fade-in': enableAnimation}"
           ng-repeat="liveEvent in liveEvents | startFrom: startFrom | limitTo : args.listLimit">

         <!--Competitors and path-->
         <div class="kw-event-name-container l-flexbox l-vertical l-pack-start l-flex-3 l-pl-16 l-pr-16">

            <!--Competitors-->
            <div class="kw-event-header l-flexbox l-horizontal" ng-click="navigateToLiveEvent(liveEvent.event.id)">

               <!--Team name-->
               <div class="l-flexbox l-vertical l-flexed l-flex-3">
                  <div class="l-flexbox">
                     <span ng-class="{'kw-serve animated infinite': liveEvent.liveData.statistics.sets.homeServe}"></span>
                     <span class="text-truncate">{{liveEvent.event.homeName}}</span>
                  </div>

                  <div class="l-flexbox">
                     <span ng-class="{'kw-serve animated infinite': liveEvent.liveData.statistics.sets.homeServe === false}"></span>
                     <span class="text-truncate">{{liveEvent.event.awayName}}</span>
                  </div>
               </div>

               <!--Scores-->
               <div class="kw-event-score l-flexbox l-vertical">
                  <!--Home set score-->
                  <div ng-if="liveEvent.liveData.statistics" class="l-flexbox l-pack-center l-align-center l-flexed l-mr-6">
                     <div class="kw-event-team-stats {{key}}"
                          ng-if="liveEvent.liveData.statistics.football && value > 0"
                          ng-repeat="(key, value) in liveEvent.liveData.statistics.football.home">
                     </div>

                     <div class="kw-event-team-sets l-flexed l-pack-center l-mr-12"
                          ng-if="liveEvent.liveData.statistics.sets && liveEvent.liveData.statistics.sets.home.length && scoreset >= 0"
                          ng-repeat="scoreset in liveEvent.liveData.statistics.sets.home track by $index">
                        <strong class="l-pack-center l-flexbox">{{scoreset}}</strong>
                     </div>
                  </div>
                  <!--Away set score-->
                  <div ng-if="liveEvent.liveData.statistics" class="l-flexbox l-pack-center l-align-center l-flexed l-mr-6">
                     <div class="kw-event-team-stats {{key}}"
                          ng-if="liveEvent.liveData.statistics.football && value > 0"
                          ng-repeat="(key, value) in liveEvent.liveData.statistics.football.away">
                     </div>

                     <div class="kw-event-team-sets l-flexed l-pack-center l-mr-12"
                          ng-if="liveEvent.liveData.statistics.sets && liveEvent.liveData.statistics.sets.away.length && scoreset >= 0"
                          ng-repeat="scoreset in liveEvent.liveData.statistics.sets.away track by $index">
                        <strong class="l-pack-center l-flexbox">{{scoreset}}</strong>
                     </div>
                  </div>
               </div>

               <!--Score-->
               <div class="kw-event-score l-flexbox l-vertical">
                  <span ng-class="{'kw-sets': liveEvent.liveData.statistics.sets }"
                        class="l-flexbox l-pack-end"><strong>{{liveEvent.liveData.score.home}}</strong></span>
                  <span ng-class="{'kw-sets': liveEvent.liveData.statistics.sets }"
                        class="l-flexbox l-pack-end"><strong>{{liveEvent.liveData.score.away}}</strong></span>
               </div>

            </div>

            <div class="l-flexbox">
               <!--Event path-->
               <div class="kw-event-path KambiWidget-card-support-text-color l-flexbox l-horizontal l-flexed l-pt-6">
                  <div class="l-flexbox" ng-repeat="p in liveEvent.event.path"
                       style="max-width: {{ 100 / liveEvent.event.path.length }}%">
                  <span class="kw-event-path-name l-flexbox l-flex-3">
                     <span class="text-truncate">{{p.name}}</span>
                  </span>
                     <span ng-if="!$last" class="kw-event-path-divider l-pl-6 l-pr-6">{{!$last?'/':''}}</span>
                  </div>
               </div>

               <!--Event time-->
               <div class="kw-event-time l-pt-6">
                  <timer-directive class="l-flexbox l-pack-center" index="$index" timer="liveEvent.liveData.matchClock"></timer-directive>
               </div>
            </div>
         </div>

         <!--Outcomes-->
         <div class="kw-event-outcomes l-flexbox l-pr-6">
            <button ng-repeat="outcome in liveEvent.mainBetOffer.outcomes" ng-if="liveEvent.mainBetOffer.outcomes.length <= 3"
                    ng-click="toggleOutcome(outcome)" ng-class="{'KambiWidget-outcome--selected': outcome.selected===true}"
                    type="button" role="button" class="KambiWidget-outcome kw-link l-ml-6 l-flex-1">
               <div class="KambiWidget-outcome__flexwrap">
                  <div class="KambiWidget-outcome__label-wrapper">
                     <span class="KambiWidget-outcome__label">{{getOutcomeLabel(outcome, liveEvent.event)| translate}}</span>
                     <span class="KambiWidget-outcome__line"></span>
                  </div>
                  <div class="KambiWidget-outcome__odds-wrapper">
                     <span class="KambiWidget-outcome__odds">{{getFormattedOdds(outcome)}}</span>
                  </div>
               </div>
            </button>
            <div class="l-flexbox l-expander l-flex-1 l-pack-center l-align-center"
                 ng-if="liveEvent.mainBetOffer.outcomes.length > 3">
               {{liveEvent.mainBetOffer.outcomes.length }} outcomes
            </div>
            <div class="l-flexbox l-flex-1 l-pack-center" ng-if="!liveEvent.mainBetOffer">
            </div>

         </div>

      </div>
   </main>
   <!--Footer-->
   <footer class="kw-footer">
      <kambi-pagination-directive class="kw-pagination l-flexbox l-pack-center l-align-center"
                                  list="liveEvents"
                                  pages="pages"
                                  start-from="startFrom"
                                  list-limit="args.listLimit"></kambi-pagination-directive>
   </footer>
</div>
</body>
</html>
