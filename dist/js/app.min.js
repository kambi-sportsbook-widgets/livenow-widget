(function(){var e;e=["widgetCore","ngAnimate"],function(e){"use strict";return e}(angular.module("livenowWidget",e))}).call(this),function(){"use strict";function e(t,n,i,r){angular.extend(e,r("widgetCoreController",{$scope:t})),t.defaultArgs={listLimit:0},t.initialListLimit=t.defaultArgs.listLimit,t.liveEvents=[],t.pages=[],t.startFrom=0,t.defaultHeight=417,t.currentHeight=417,0===t.initialListLimit&&(t.initialListLimit=3),t.getLiveEvents=function(e){return t.loading=!0,i.getLiveEvents(e).then(function(e){t.liveEvents=e.data.liveEvents,t.initialListLimit>t.liveEvents.length&&(t.args.listLimit=t.liveEvents.length),t.setPages(t.liveEvents,t.args.listLimit),n.requestBetslipOutcomes()},function(e){})["finally"](function(){t.loading=!1})},t.toggleOutcome=function(e){e.selected!==!0?t.addOutcomeToBetslip(e):t.removeOutcomeFromBetslip(e)},t.updateOutcomes=function(e){for(var n=0,i=t.liveEvents.length;i>n;++n)null!=t.liveEvents[n].mainBetOffer&&null!=t.liveEvents[n].mainBetOffer.outcomes&&t.updateBetOfferOutcomes(t.liveEvents[n].mainBetOffer,e);t.$apply()},t.init().then(function(){t.getLiveEvents()}),t.$on("OUTCOMES:UPDATE",function(e,n){t.updateOutcomes(n.outcomes)}),t.$on("ODDS:FORMAT",function(e,n){t.setOddsFormat(n)})}!function(t){return t.controller("appController",["$scope","kambiWidgetService","kambiAPIService","$controller",e])}(angular.module("livenowWidget"))}.call(this),function(){"use strict";function e(e,t,n,i){e.apiConfigSet=!1,e.appArgsSet=!1,e.oddsFormat="decimal",e.defaultHeight=350,e.currentHeight=350,e.apiVersion="v2",e.streamingAllowedForPlayer=!1,e.defaultArgs={},e.init=function(){var r=i.defer(),o=e.$on("CLIENT:CONFIG",function(t,i){null!=i.oddsFormat&&e.setOddsFormat(i.oddsFormat),i.version=e.apiVersion,n.setConfig(i),e.apiConfigSet=!0,e.apiConfigSet&&e.appArgsSet&&r.resolve(),o()}),a=e.$on("WIDGET:ARGS",function(t,i){e.setArgs(i),null!=i&&i.hasOwnProperty("offering")?n.setOffering(i.offering):console.warn("No offering has been set, API requests will not work"),e.appArgsSet=!0,e.apiConfigSet&&e.appArgsSet&&r.resolve(),a()});return t.setWidgetHeight(e.defaultHeight),t.requestWidgetHeight(),t.enableWidgetTransition(!0),t.requestClientConfig(),t.requestWidgetArgs(),t.requestBetslipOutcomes(),t.requestOddsFormat(),r.promise},e.navigateToLiveEvent=function(e){t.navigateToLiveEvent(e)},e.getWidgetHeight=function(){t.requestWidgetHeight()},e.setWidgetHeight=function(n){e.currentHeight=n,t.setWidgetHeight(n)},e.setWidgetEnableTransition=function(e){t.enableWidgetTransition(e)},e.removeWidget=function(){t.removeWidget()},e.addOutcomeToBetslip=function(e){t.addOutcomeToBetslip(e.id)},e.removeOutcomeFromBetslip=function(e){t.removeOutcomeFromBetslip(e.id)},e.requestBetslipOutcomes=function(){t.requestBetslipOutcomes()},e.requestWidgetArgs=function(){t.requestWidgetArgs()},e.requestPageInfo=function(){t.requestPageInfo()},e.requestOddsFormat=function(){t.requestOddsFormat()},e.setOddsFormat=function(t){e.oddsFormat=t},e.findEvent=function(e,t){for(var n=0,i=e.length;i>n;++n)if(e[n].id===t)return e[n];return null},e.getOutcomeLabel=function(e,t){return n.getOutcomeLabel(e,t)},e.setArgs=function(t){var n=e.defaultArgs;for(var i in t)t.hasOwnProperty(i)&&n.hasOwnProperty(i)&&(n[i]=t[i]);e.args=n},e.setPages=function(t,n,i){var r=i||t.length,o=Math.ceil(r/n),a=0;for(e.pages=[];o>a;++a)e.pages.push({startFrom:n*a,page:a+1})},e.updateBetOfferOutcomes=function(e,t){for(var n=0,i=e.outcomes.length,r=t.length;i>n;++n){var o=0,a=-1;for(e.outcomes[n].selected=!1;r>o;o++)e.outcomes[n].id===t[o].id&&(e.outcomes[n].odds=t[o].odds,a=n),-1!==a&&(e.outcomes[a].selected=!0)}},e.$on("WIDGET:HEIGHT",function(t,n){e.currentHeight=n})}!function(t){return t.controller("widgetCoreController",["$scope","kambiWidgetService","kambiAPIService","$q",e])}(angular.module("widgetCore",[]))}(),function(){"use strict";!function(e){return e.directive("kambiPaginationDirective",[function(){return{restrict:"E",scope:{list:"=list",listLimit:"=",pages:"=",startFrom:"=",activePage:"="},template:'<span ng-class="{disabled:activePage === 1}" ng-if="pages.length > 1" ng-click="pagePrev()" class="kw-page-link kw-pagination-arrow"><i class="ion-ios-arrow-left"></i></span><span ng-if="pages.length > 1" ng-repeat="page in getPagination()" ng-click="setActivePage(page)" ng-class="{active:page === activePage}" class="kw-page-link l-pack-center l-align-center">{{page}}</span><span ng-class="{disabled:activePage === pages.length}" ng-if="pages.length > 1" ng-click="pageNext()" class="kw-page-link kw-pagination-arrow"><i class="ion-ios-arrow-right"></i></span>',controller:["$scope",function(e){e.activePage=1,e.setPage=function(t){e.startFrom=t.startFrom,e.activePage=t.page},e.setActivePage=function(t){e.setPage(e.pages[t-1])},e.pagePrev=function(){e.activePage>1&&e.setPage(e.pages[e.activePage-2])},e.pageNext=function(){e.activePage<e.pages.length&&e.setPage(e.pages[e.activePage])},e.pageCount=function(){return Math.ceil(e.list.length/e.listLimit)},e.getPagination=function(){var t=[],n=5,i=e.activePage,r=e.pageCount(),o=1,a=r;r>n&&(o=Math.max(i-Math.floor(n/2),1),a=o+n-1,a>r&&(a=r,o=a-n+1));for(var s=o;a>=s;s++)t.push(s);return t}}]}}])}(angular.module("widgetCore"))}(),function(){!function(e){"use strict";e.filter("startFrom",function(){return function(e,t){return e?(t=+t,e.slice(t)):[]}})}(angular.module("widgetCore"))}(),function(){"use strict";!function(e){return e.service("kambiAPIService",["$http","$q",function(e,t){var n={};return n.configDefer=t.defer(),n.configSet=!1,n.offeringSet=!1,n.config={apiBaseUrl:null,channelId:null,currency:null,locale:null,market:null,offering:null,clientId:null,version:"v2"},n.setConfig=function(e){for(var t in e)e.hasOwnProperty(t)&&n.config.hasOwnProperty(t)&&(n.config[t]=e[t]);n.config.apiBaseUrl=n.config.apiBaseUrl.replace(/\{apiVersion}/gi,n.config.version),n.configSet=!0,n.configSet&&n.offeringSet&&n.configDefer.resolve()},n.setOffering=function(e){n.config.offering=e,n.offeringSet=!0,n.configSet&&n.offeringSet&&n.configDefer.resolve()},n.getGroupEvents=function(e){var t="/event/group/"+e+".json";return n.doRequest(t)},n.getLiveEvents=function(){var e="/event/live/open.json";return n.doRequest(e)},n.getBetoffersByGroup=function(e,t,i,r,o){var a="/betoffer/main/group/"+e+".json";return n.doRequest(a,{include:"participants"})},n.getGroupById=function(e,t){var i="/group/"+e+".json";return n.doRequest(i,{depth:t})},n.doRequest=function(i,r){return n.configDefer.promise.then(function(){if(null==n.config.offering)return t.reject("The offering has not been set, please provide it in the widget arguments");var o=n.config.apiBaseUrl+n.config.offering+i,a=r||{},s={lang:a.locale||n.config.locale,market:a.market||n.config.market,client_id:a.clientId||n.config.clientId,include:a.include||null,callback:"JSON_CALLBACK"};return e.jsonp(o,{params:s,cache:!1})})},n.getOutcomeLabel=function(e,t){switch(e.type){case"OT_ONE":return t.homeName;case"OT_CROSS":return"Draw";case"OT_TWO":return t.awayName;default:return console.warn("Unhandled outcome type: "+e.type,e),e.label}},n}])}(angular.module("widgetCore"))}(),function(){"use strict";!function(e){return e.service("kambiWidgetService",["$rootScope","$window","$q",function(e,t,n){var i,r,o={};return t.KambiWidget?(r=n.defer(),i=r.promise,t.KambiWidget.apiReady=function(e){o.api=e,r.resolve(e)},t.KambiWidget.receiveResponse=function(e){o.handleResponse(e)}):console.warn("Kambi widget api not loaded"),o.handleResponse=function(t){switch(t.type){case o.api.WIDGET_HEIGHT:e.$broadcast("WIDGET:HEIGHT",t.data);break;case o.api.BETSLIP_OUTCOMES:e.$broadcast("OUTCOMES:UPDATE",t.data);break;case o.api.WIDGET_ARGS:e.$broadcast("WIDGET:ARGS",t.data);break;case o.api.PAGE_INFO:e.$broadcast("PAGE:INFO",t.data);break;case o.api.CLIENT_ODDS_FORMAT:e.$broadcast("ODDS:FORMAT",t.data);break;case o.api.CLIENT_CONFIG:e.$broadcast("CLIENT:CONFIG",t.data);break;case o.api.USER_LOGGED_IN:console.debug("User logged in",t.data),e.$broadcast("USER:LOGGED_IN",t.data);break;default:console.info("Unhandled response type: "+t.type),console.info(t)}},o.requestWidgetHeight=function(){var e=n.defer();return i.then(function(e){e.request(e.WIDGET_HEIGHT)}),e.promise},o.setWidgetHeight=function(e){var t=n.defer();return i.then(function(t){t.set(t.WIDGET_HEIGHT,e)}),t.promise},o.enableWidgetTransition=function(e){var t=n.defer();return i.then(function(t){e?t.set(t.WIDGET_ENABLE_TRANSITION):t.set(t.WIDGET_DISABLE_TRANSITION)}),t.promise},o.removeWidget=function(){var e=n.defer();return i.then(function(e){e.remove()}),e.promise},o.navigateToLiveEvent=function(e){var t=n.defer();return i.then(function(t){t.navigateClient("#event/live/"+e)}),t.promise},o.navigateToEvent=function(e){var t=n.defer();return i.then(function(t){t.navigateClient("#event/"+e)}),t.promise},o.navigateToGroup=function(e){var t=n.defer();return i.then(function(t){t.navigateClient("#group/"+e)}),t.promise},o.navigateToLiveEvents=function(){var e=n.defer();return i.then(function(e){e.navigateClient("#events/live")}),e.promise},o.addOutcomeToBetslip=function(e,t,r,o){var a=n.defer();return i.then(function(n){var i=[];angular.isArray(e)?i=e:i.push(e);var a={outcomes:i};null!=t&&(angular.isArray(t)?a.stakes=t:a.stakes=[t]),a.couponType=1===i.length?n.BETSLIP_OUTCOMES_ARGS.TYPE_SINGLE:n.BETSLIP_OUTCOMES_ARGS.TYPE_COMBINATION,a.updateMode="replace"!==r?n.BETSLIP_OUTCOMES_ARGS.UPDATE_APPEND:n.BETSLIP_OUTCOMES_ARGS.UPDATE_REPLACE,null!=o&&(a.source=o),n.set(n.BETSLIP_OUTCOMES,a)}),a.promise},o.removeOutcomeFromBetslip=function(e){var t=n.defer();return i.then(function(t){var n=[];angular.isArray(e)?n=e:n.push(e),t.set(t.BETSLIP_OUTCOMES_REMOVE,{outcomes:n})}),t.promise},o.requestBetslipOutcomes=function(){var e=n.defer();return i.then(function(e){e.request(e.BETSLIP_OUTCOMES)}),e.promise},o.requestPageInfo=function(){var e=n.defer();return i.then(function(e){e.request(e.PAGE_INFO)}),e.promise},o.requestWidgetArgs=function(){var e=n.defer();return i.then(function(e){e.request(e.WIDGET_ARGS)}),e.promise},o.requestClientConfig=function(){var e=n.defer();return i.then(function(e){e.request(e.CLIENT_CONFIG)}),e.promise},o.requestOddsFormat=function(){var e=n.defer();return i.then(function(e){e.request(e.CLIENT_ODDS_FORMAT)}),e.promise},o}])}(angular.module("widgetCore"))}();